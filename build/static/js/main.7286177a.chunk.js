(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,a,t){e.exports=t(184)},119:function(e,a,t){},178:function(e,a,t){},180:function(e,a,t){},182:function(e,a,t){},184:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(14),l=t.n(i),c=t(33),s=t(34),o=t(39),f=t(35),u=t(40),m=t(84),p=(t(109),t(37)),d=t(30),b=t(29),g=(t(206),t(209),t(211),t(212),t(203));Object(g.a)(function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}});var h=t(218),E=t(214),v=t(213),j=t(221),O=t(217),I=r.a.forwardRef(function(e,a){return r.a.createElement(j.a,Object.assign({direction:"up",ref:a},e))});function w(e){return r.a.createElement("div",null,r.a.createElement(h.a,{open:e.open,TransitionComponent:I,keepMounted:!0,onClose:e.handleFileChange},r.a.createElement(v.a,null," ","Select Image File"," "),r.a.createElement(E.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(O.a.Group,{controlId:"file"},r.a.createElement(O.a.Control,{onChange:e.handleFileChange,type:"file",accept:"image/*",className:"imagefile"}))))))}var k=t(24),y=t.n(k),N=t(36),C=t(93),R=t(219),D=t(215),A=(t(119),r.a.forwardRef(function(e,a){return r.a.createElement(j.a,Object.assign({direction:"up",ref:a},e))}));function x(e){var a=Object(n.useState)(!0),t=Object(C.a)(a,2),i=t[0],l=t[1],c=function(){var a=Object(N.a)(y.a.mark(function a(){return y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l(!1),a.next=3,e.classifyImage();case 3:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(h.a,{open:e.open&&i,TransitionComponent:A,onClose:e.classifyImage},r.a.createElement(E.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(D.a,{className:"selected-image",src:e.file,ref:e.r}),r.a.createElement("div",{className:"button-container"},r.a.createElement(R.a,{className:"button",onClick:c},"Classify"))))))}Object(g.a)(function(e){return{backdrop:{zIndex:e.zIndex.drawer+5,color:"#fff"},root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}});var M=t(90),L=t.n(M),F="http://clais1.csie.org:3005";function U(e){return _.apply(this,arguments)}function _(){return(_=Object(N.a)(y.a.mark(function e(a){var t,n,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("img",a),t.append("model_id","0"),e.next=5,L.a.post("".concat(F,"/predict"),t,{headers:{"Content-Type":"multipart/form-data"}});case 5:return n=e.sent,(r=new Image).src="data:image/png;base64,"+n.data,e.abrupt("return",r);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(e){return{type:"@MAIN/END_READ_IMAGE",mask:e}}var G=t(31),S=function(e){function a(e){return Object(c.a)(this,a),Object(o.a)(this,Object(f.a)(a).call(this,e))}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props,a=e.fileImage,t=e.masks,n=e.visibleMaskID,i=window.innerHeight/2,l=window.innerWidth/2,c=l/a.width;return r.a.createElement("div",{className:"display"},r.a.createElement(G.c,{width:l,height:i},r.a.createElement(G.b,null,r.a.createElement(G.a,{image:a,scaleX:c,scaleY:c})),r.a.createElement(G.b,null,t.length>0&&r.a.createElement(G.a,{image:t[0],visible:0==n,scaleX:c,scaleY:c}),t.length>1&&r.a.createElement(G.a,{image:t[1],visible:1==n,scaleX:c,scaleY:c}))))}}]),a}(r.a.Component),B=Object(p.b)(function(e){return Object(b.a)({},e.main)})(S),T=(t(178),function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(o.a)(this,Object(f.a)(a).call(this,e))).handleFileChange=function(e){if(e.target.files&&e.target.files.length>0){var a=new window.Image,n=URL.createObjectURL(e.target.files[0]);a.src=n,t.props.dispatch((r={fileData:e.target.files[0],fileImage:a,fileURL:n,fileName:e.target.files[0].name},function(){var e=Object(N.a)(y.a.mark(function e(a,t){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"@MAIN/READ_IMAGE",fileData:(t=r).fileData,fileURL:t.fileURL,fileName:t.fileName,fileImage:t.fileImage}),e.next=3,U(r.fileData);case 3:n=e.sent,console.log("finsh classifying"),a(z(n));case 6:case"end":return e.stop()}var t},e)}));return function(a,t){return e.apply(this,arguments)}}()))}var r},t.CropperRef=r.a.createRef(),t.CanvasRef=r.a.createRef(),t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props,a=e.fileURL,t=e.fileName,n=e.masks;return r.a.createElement("div",{className:"container"},r.a.createElement(w,{open:!a,handleFileChange:this.handleFileChange}),r.a.createElement(x,{open:""!==t&&0==n.length,file:a,r:this.CropperRef,classifyImage:this.classifyLocalImage}),!1,n.length>0&&r.a.createElement(B,null))}}]),a}(r.a.Component)),W=Object(p.b)(function(e){return Object(b.a)({},e.main)})(T),X=t(92),Y={fileURL:null,fileName:"",fileData:null,fileImage:null,masks:[],visibleMaskID:0};t(180);var J=Object(d.e)(Object(d.c)({main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"@MAIN/READ_IMAGE":return Object(b.a)({},e,{fileURL:a.fileURL,filenName:a.fileName,fileData:a.fileData,fileImage:a.fileImage});case"@MAIN/END_READ_IMAGE":return Object(b.a)({},e,{masks:[a.mask].concat(Object(X.a)(e.masks))});default:return e}}}),Object(d.d)(Object(d.a)(m.a))),H=function(e){function a(e){return Object(c.a)(this,a),Object(o.a)(this,Object(f.a)(a).call(this,e))}return Object(u.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(p.a,{store:J,className:"App"},r.a.createElement("div",{className:"App"},r.a.createElement(W,null)))}}]),a}(r.a.Component);t(182);l.a.render(r.a.createElement(H,null),document.getElementById("root"))}},[[105,2,1]]]);
//# sourceMappingURL=main.7286177a.chunk.js.map